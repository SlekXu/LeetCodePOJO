# Netty实战简介

## 一、基于Netty的实时日志上报优化
1. 简介：通过Netty将转化后的syslog实时日志发送到第三方OSS
2. 概要：原本使用Log4j的syslog转化功能发送，但由于数据量超大(2000等效网元，每秒1000条，则等效约200W条/秒)， 
        轮询向多个OSS发送导致线程阻塞，反向阻塞Kakfa消费，造成消息积压（“消费Kafka消息入队列”，“转化+发送是同步的”）
        —— Kafka消费做了异常保护，判断消费线程满则不poll并等待若干分钟（类似于“自旋”），若队列中的消息一直无法被处理则可能导致长时间自旋，从而产生消息积压。
           另外，如果若干时间内组内消费者不消费，则会被踢出消费者组。
        改用Netty的异步非阻塞方式发送，发送不再成为性能瓶颈。
3. 问题：Netty发送队列消息积压导致内存泄露

## 二、基于Netty的心跳机制
1. 简介：通过心跳来判断网元是否连接/断链
2. 概要：通过Netty的心跳检测机制，来判断网元是否连接正常/断链



